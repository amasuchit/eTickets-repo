@model MovieViewModel

@{
	ViewData["Title"] = "Edit";
}


<div class="content-wrapper">
	<div class="col-md-8 offset-2 mt-4 ">
		<h1 class="text-center">Update @Model.Name's Record</h1>
		<form asp-action="Edit" asp-controller="Movie" method="Post">
			@Html.AntiForgeryToken()

			@Html.Partial("Partial/_MovieCreateEdit", Model)
			@* <div asp-validation-summary="ModelOnly" class="text-danger"></div>

			<input type="hidden" asp-for="Id"/>

			<div class="form-group mt-2">
				<label asp-for="Name" class="control-label fw-bold"></label>
				<input asp-for="Name" class="form-control" />
				<span asp-validation-for="Name" class="text-danger"></span>
			</div>
			<div class="form-group mt-2">
				<label asp-for="Description" class="control-label fw-bold"></label>
				<textarea asp-for="Description" class="form-control" rows="3"></textarea>
				<span asp-validation-for="Description" class="text-danger"></span>
			</div>
			<div class="form-group mt-2">
				<label asp-for="Price" class="control-label fw-bold"></label>
				<input asp-for="Price" class="form-control" />
				<span asp-validation-for="Price" class="text-danger"></span>
			</div>
			
			 <div class="form-class mt-4 d-flex col-md-8">
				 <div class="col-md-5">
					 <label class="fw-bold">Image Preview:</label>
				 </div>
				 <div class="col-md-4">
					<img id="imagepreview" class="image-fluid mx-4	" style="width: 200px; height: 300px; object-fit: cover;"/>
				 </div>

			 </div>



			<div class="form-group mt-2">
				<label asp-for="ImageURL" class="control-label fw-bold"></label>
				<input asp-for="ImageURL" class="form-control" />
				<span asp-validation-for="ImageURL" class="text-danger"></span>
			</div>
			<div class="form-group mt-2">
				<label asp-for="StartDate" class="control-label fw-bold"></label>
				<input asp-for="StartDate" class="form-control"/>
				<span asp-validation-for="StartDate" class="text-danger"></span>
			</div>
			<div class="form-group mt-2">
				<label asp-for="EndDate" class="control-label fw-bold"></label>
				<input asp-for="EndDate" class="form-control" />
				<span asp-validation-for="EndDate" class="text-danger"></span>
			</div>
			<div class="form-group mt-2">
				<label asp-for="MovieCategory" class="control-label fw-bold"></label>
				<select asp-for="MovieCategory" asp-items="Html.GetEnumSelectList<MovieCategory>()" class="form-control">
					<option value="">Select Category</option>
				</select>
				<span asp-validation-for="MovieCategory" class="text-danger"></span>
			</div>
			<div class="form-group mt-2">
				<label class="control-label fw-bold">Actors</label>
<div style="column-count: 2;">
					@foreach (var actor in Model.Actors)
					{
			<div class="form-check">
				<input class="form-check-input"
					   type="checkbox"
					   name="ActorId"
					   value="@actor.Value"
					   id="actor_@actor.Value" 
							@(Model.ActorId.Contains(int.Parse(actor.Value)) ? "checked" : "")/>
				<label class="form-check-label" for="actor_@actor.Value">
								@actor.Text
				</label>
			</div>
					}
</div>
</div>
			<div class="form-group mt-2">
				<label asp-for="CinemaId" class="control-label fw-bold"></label>
				<select asp-for="CinemaId" asp-items=@Model.Cinemas class="form-control" >
					<option value="">Select Cinema</option>
				</select>
				<span asp-validation-for="CinemaId" class="text-danger"></span>
			</div>
			<div class="form-group mt-2">
				<label asp-for="ProducerId" class="control-label fw-bold"></label>
				<select asp-for="ProducerId" asp-items="@Model.Producers"  class="form-control" >
					<option value="">Select Producer</option>
				</select>
				<span asp-validation-for="ProducerId" class="text-danger"></span>
			</div> *@
			<div class="form-group mt-2">
				<button class="btn btn-outline-success float-end" type="submit"  ><i class="fa-solid fa-pen-to-square"></i> Update</button>
				<a asp-action="Index" class="btn btn-outline-info mx-2"><i class="fa-solid fa-arrow-left"></i> Back to List</a>
			</div>
		</form>



	</div>
</div>

<div>
	
</div>


@section Scripts {
					<script>
							 $(document).ready(function () {
									var output = document.getElementById('imagepreview');
								output.src = $("#ImageURL").val();
							})

							$("#ImageURL").on("change", function () {
									var output = document.getElementById('imagepreview');
								output.src = $(this).val();
							})

					</script>			
}